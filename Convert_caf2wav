import os
import subprocess

def convert_caf_to_wav(input_folder, output_folder):
    # Ensure the output folder exists
    os.makedirs(output_folder, exist_ok=True)

    # Loop through all files in the input folder
    for file_name in os.listdir(input_folder):
        if file_name.endswith(".caf"):
            input_path = os.path.join(input_folder, file_name)
            output_path = os.path.join(output_folder, f"{os.path.splitext(file_name)[0]}.wav")

            # Run ffmpeg command to convert CAF to WAV
            command = [
                "ffmpeg",
                "-i", input_path,
                output_path
            ]

            try:
                subprocess.run(command, check=True)
                print(f"Converted {file_name} to {os.path.basename(output_path)}")
            except subprocess.CalledProcessError as e:
                print(f"Error converting {file_name}: {e}")

# Specify input and output folders
input_folder = "/home/mio/Downloads/donateacry-corpus-master/donateacry-ios-upload-bucket"
output_folder = "/home/mio/Downloads/donateacry-corpus-master/ios_voices"

# Convert CAF to WAV
convert_caf_to_wav(input_folder, output_folder)
